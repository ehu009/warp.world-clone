<h1>Hello, <%= @warp_user.channel_name %>!</h1>

<p>
Linking to your queue, for viewers to see:&nbsp;
<strong>
<code>
<%= warp_user_levels_url(@warp_user) %>
</code></strong>
</p>

<h3>Nightbot integration</h3>

Just paste these into your <strong>Nightbot</strong> commands:<br/>
<p>
Submissions (<i>e.g. !add</i>):&nbsp;
<strong>
<code>
$(urlfetch <%= warp_user_submission_url(@warp_user) %>?added_by=$(eval encodeURIComponent(`$(user)`);)&code=$(querystring))
</code></strong><br>
</p>
<p>
Replacements (<i>e.g. !exch</i>):&nbsp;
<strong>
<code>
$(urlfetch <%= warp_viewer_replace_url(@warp_user) %>?added_by=$(eval encodeURIComponent(`$(user)`);)&code=$(querystring))
</code></strong><br>
</p>
<p>
Removals (<i>e.g. !del</i>):&nbsp;
<strong>
<code>
$(urlfetch <%= warp_viewer_remove_url(@warp_user) %>?added_by=$(eval encodeURIComponent(`$(user)`);)&code=$(querystring))
</code></strong><br>
</p>



<h3>Botisimo integration</h3>

Just paste these into your <strong>Botisimo</strong> commands:<br/>
<p>
Submissions (<i>e.g. !add</i>):&nbsp;
<strong>
<code>
$(fetch <%= warp_user_submission_url(@warp_user) %>?added_by=$(urlencode $(usernameplain))&code=$(query))
</code></strong><br>
</p>
<p>
Replacements (<i>e.g. !exch</i>):&nbsp;
<strong>
<code>
$(fetch <%= warp_viewer_replace_url(@warp_user) %>?added_by=$(urlencode $(usernameplain))&code=$(query))
</code></strong><br>
</p>
<p>
Removals (<i>e.g. !del</i>):&nbsp;
<strong>
<code>
$(fetch <%= warp_viewer_remove_url(@warp_user) %>?added_by=$(urlencode $(usernameplain))&code=$(query))
</code></strong><br>
</p>
<p>






<hr/>
<table border="0">
<tr>
<td width="40%">
<h3>Editing your user info</h3>

<%= render "form", warp_user: @warp_user %>
</td>

<td width="40%">
<h3>Level submission management
</h3>

<p>
Your submission queue is currently <b><% if @warp_user.active then %>OPEN<% else %>CLOSED<%end%></b>:&nbsp;

<% if @warp_user.active then %>
<%= link_to warp_queue_close_path(@warp_user.api_key) do |link| %>
<button align="center" type="button">Close the queue</button>
<% end %>
<% else %>

<%= link_to warp_queue_open_path(@warp_user.api_key) do |link| %>
<button type="button">Open the queue</button>
<% end %>

<% end %>
</p>


<% empty = @levels == nil or @levels == []%>
<% if empty then %>
<p>
<strong>The queue is empty</strong>
</p>
<% else %>

<p>
<strong>Clear all levels from queue:</strong>&nbsp;
<%= link_to warp_list_clear_all_path(@warp_user.api_key) do |link| %>
<button type="button">Commit</button>
<% end %>
</p>
<% end %>

</td>

</tr></table>

<hr/>


<% if empty then %>
<p>...<br>
<br>
-</p>
<% else %>
<h1>Level submissions</h1>

<p>
By hitting play, you can see how long has been spent on a level. <br>
When you are done, hit either to complete or skip the current level.<br>

</p>

<p>
<table border="2">
<thead>
<strong>
<tr>
<td>Current level?</td>
<td>Time spent</td>
<td>&nbsp;</td>
<td>Added by</td>
<td>Status</td>
<td>Time since submission</td>

<td>&nbsp;</td>
<td>Level code</td>
<td>&nbsp;</td>

<td>Play</td>
<td>Skip</td>
<td>Complete</td>
<td>Reset</td>
<td>&nbsp;</td>
<td>Delete</td>
</tr>
</strong>
</thead>
<tbody>
<% @levels.each do |l| %>

<tr>
<td><% if l.status == "current" then %><i class="fas fa-thumbs-up"></i><%end%> </td>
<td><strong>
<% if l.status == "current" then %>
<%= distance_of_time_in_words_to_now l.started_at %></strong></td>
<% else %>
<% if l.started_at != nil and l.completed_at != nil then %>
<%= distance_of_time_in_words (l.completed_at - l.started_at) %>
<% end %>
<% end %>
<td>&nbsp;</td>

<td><strong><%= l.added_by %></strong></td>
<td><%= l.status %></td>
<td><%= distance_of_time_in_words_to_now(l.created_at) %></td>


<td>&nbsp;</td>
<td><strong><%= l.code %></strong></td>
<td>&nbsp;</td>


<td><%= link_to warp_play_level_path(@warp_user.api_key, l.code) do |link| %>
<i class="fas fa-play"></i>
<% end %>
</td>
<td><%= link_to warp_skip_level_path(@warp_user.api_key, l.code) do |link| %>
<i class="fas fa-forward"></i>
<% end %></td>
<td><%= link_to warp_complete_level_path(@warp_user.api_key, l.code) do |link| %>
<i class="fas fa-check"></i>
<% end %></td>
<td><%= link_to warp_reset_level_path(@warp_user.api_key, l.code) do |link| %>
<i class="fas fa-undo"></i>
<% end %></td>
<td>&nbsp;
</td>
<td><%= link_to warp_remove_level_path(@warp_user.api_key, l.code) do |link| %>
<i class="fas fa-trash"></i>
<% end %></td>





</tr>



<% end %>
</tbody>
</table>
</p>
<% end %>